#fulldata <- subset (fulldata, select = -c(Virus))
View(test)
test$Count <-  data_frame(fulldata$Value)
View(test)
test <-  data_frame(count = fulldata$Value)
View(test)
test1 <- fulldata %>% (subset.data.frame(c(Year, Virus, Value)))
test1 <- fulldata %>% (subset.data.frame(c(Years, Virus, Value)))
test1 <- fulldata %>% (subset(c(Year, Virus, Value)))
?subset
test <-  data_frame(year = fulldata$Year,
virus = fulldata$Virus_Name,
count = fulldata$Value)
View(test)
test1 <- fulldata %>%
pivot_wider(id_cols = c("Commute_Count", "Commute_IR"),
names_from = c("Commute_Count", "Commute_IR"),
values_from = Value)
View(test1)
?pivot_wider
test1 <- fulldata %>%
pivot_wider(names_from = Commute_Count,
values_from = Value)
View(test1)
unique(test1$na)
test1 <- fulldata %>%
pivot_wider(names_from = Commute_Count,
values_from = Value) %>%
pivot_longer(cols = c(local_count: imp_count),
names_to = "Type",
values_to = "Count")
test1 <- fulldata %>%
pivot_wider(names_from = Commute_Count,
values_from = Value) %>%
pivot_longer(cols = c(local_count: imp_count),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_wider(names_from = Commute_IR,
values_from = Value) %>%
pivot_longer(cols = c(local_IR: imp_IR),
names_to = "IR_Type",
values_to = "IR")
test1 <- fulldata %>%
pivot_wider(names_from = Commute_Count,
values_from = Value) %>%
pivot_longer(cols = c(local_count: imp_count),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_wider(names_from = Commute_IR,
values_from = Value)
test1 <- fulldata %>%
pivot_wider(names_from = Commute_Count,
values_from = Value) %>%
pivot_longer(cols = c(local_count: imp_count),
names_to = "Count_Type",
values_to = "Count")
test1 <- fulldata %>%
pivot_wider(names_from = c(Commute_Count, Commute_IR) ,
values_from = Value)
test1 <- fulldata %>%
pivot_wider(names_from = c(Commute_Count, Commute_IR) ,
values_from = Value) %>%
pivot_longer(cols = c(local_count_na, imp_count_na),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_longer(cols = c(na_local_IR, na_imp_IR),
names_to = "IR_Type",
values_to = "IR")
unique(test1$Count)
unique(test1$IR)
animation <- fulldata %>%
pivot_wider(names_from = c(Commute_Count, Commute_IR) ,
values_from = Value) %>%
pivot_longer(cols = c(local_count_na, imp_count_na),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_longer(cols = c(na_local_IR, na_imp_IR),
names_to = "IR_Type",
values_to = "IR") %>%
select(Year, Virus_Name, Transmission, IR, Count)
View(animation)
animation <- fulldata %>%
pivot_wider(names_from = c(Commute_Count, Commute_IR) ,
values_from = Value) %>%
pivot_longer(cols = c(local_count_na, imp_count_na),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_longer(cols = c(na_local_IR, na_imp_IR),
names_to = "IR_Type",
values_to = "IR") %>%
select(Year, Virus_Name, Transmission, IR, Count) %>%
group_by(Year, Virus_Name,Transmission) %>%
summarise(IR = mean(IR),
Count = mean(Count))
animation <- fulldata %>%
pivot_wider(names_from = c(Commute_Count, Commute_IR) ,
values_from = Value) %>%
pivot_longer(cols = c(local_count_na, imp_count_na),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_longer(cols = c(na_local_IR, na_imp_IR),
names_to = "IR_Type",
values_to = "IR") %>%
select(Year, Virus_Name, Transmission, IR, Count) %>%
group_by(Year, Virus_Name,Transmission) %>%
summarise(IR = mean(IR, na.rm = TRUE),
Count = mean(Count, na.rm = TRUE))
animation <- fulldata %>%
pivot_wider(names_from = c(Commute_Count, Commute_IR) ,
values_from = Value) %>%
pivot_longer(cols = c(local_count_na, imp_count_na),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_longer(cols = c(na_local_IR, na_imp_IR),
names_to = "IR_Type",
values_to = "IR") %>%
select(Year, Virus_Name, Transmission, IR, Count) %>%
group_by(Virus_Name, Year, Transmission) %>%
summarise(IR = mean(IR, na.rm = TRUE),
Count = mean(Count, na.rm = TRUE))
animation <- fulldata %>%
pivot_wider(names_from = c(Commute_Count, Commute_IR) ,
values_from = Value) %>%
pivot_longer(cols = c(local_count_na, imp_count_na),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_longer(cols = c(na_local_IR, na_imp_IR),
names_to = "IR_Type",
values_to = "IR") %>%
select(Year, Virus_Name, Transmission, IR, Count) %>%
group_by(Virus_Name, Year, Transmission) %>%
summarise(IR = sum(IR, na.rm = TRUE),
Count = sum(Count, na.rm = TRUE))
animation <- ggplot(animation, aes(x = Virus_Name,
y = IR,
colour = Virus_Name)) +
geom_bar(show.legend = FALSE, alpha = 0.9) +
scale_color_viridis_d() +
geom_bar(stat = "identity",fill=cont_colors)+
#scale_x_log10() +
#scale_size(range = c(2, 12)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation <- ggplot(animation, aes(x = Virus_Name,
y = IR)) +
geom_bar(show.legend = FALSE, alpha = 0.9) +
scale_color_viridis_d() +
geom_bar(stat = "identity",fill=Virus_Name)+
#scale_x_log10() +
#scale_size(range = c(2, 12)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation <- ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(show.legend = FALSE, alpha = 0.9) +
scale_color_viridis_d() +
geom_bar(stat = "identity")+
#scale_x_log10() +
#scale_size(range = c(2, 12)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation + transition_time(Year)
animation +   transition_states(Virus_Name, wrap = FALSE) +
shadow_mark() +
enter_grow() +
enter_fade()
animation
ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(show.legend = FALSE, alpha = 0.9) +
scale_color_viridis_d() +
geom_bar(stat = "identity")+
#scale_x_log10() +
#scale_size(range = c(2, 12)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation <- fulldata %>%
pivot_wider(names_from = c(Commute_Count, Commute_IR) ,
values_from = Value) %>%
pivot_longer(cols = c(local_count_na, imp_count_na),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_longer(cols = c(na_local_IR, na_imp_IR),
names_to = "IR_Type",
values_to = "IR") %>%
select(Year, Virus_Name, Transmission, IR, Count) %>%
group_by(Virus_Name, Year, Transmission) %>%
summarise(IR = sum(IR, na.rm = TRUE),
Count = sum(Count, na.rm = TRUE))
animation <- ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(show.legend = FALSE, alpha = 0.9) +
geom_bar(stat = "identity")+
#scale_color_viridis_d() +
#scale_x_log10() +
#scale_size(range = c(2, 12)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation
animation <- ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(show.legend = FALSE, alpha = 0.9) +
geom_bar(stat = 'identity')+
#scale_color_viridis_d() +
#scale_x_log10() +
#scale_size(range = c(2, 12)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
#geom_bar()+
#scale_color_viridis_d() +
#scale_x_log10() +
#scale_size(range = c(2, 12)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation <- fulldata %>%
pivot_wider(names_from = c(Commute_Count, Commute_IR) ,
values_from = Value) %>%
pivot_longer(cols = c(local_count_na, imp_count_na),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_longer(cols = c(na_local_IR, na_imp_IR),
names_to = "IR_Type",
values_to = "IR") %>%
select(Year, Virus_Name, Transmission, IR, Count) %>%
group_by(Virus_Name, Year, Transmission) %>%
summarise(IR = sum(IR, na.rm = TRUE),
Count = sum(Count, na.rm = TRUE)) %>%
as.data.frame()
ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
#geom_bar()+
#scale_color_viridis_d() +
#scale_x_log10() +
#scale_size(range = c(2, 12)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation <- ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
#geom_bar()+
#scale_color_viridis_d() +
#scale_x_log10() +
#scale_size(range = c(2, 12)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation + transition_states(Virus_Name, wrap = FALSE) +
shadow_mark() +
enter_grow() +
enter_fade()
library(gifski)
png_files <- list.files("/Users/prachi/Desktop/Internship/ETC5543/Animation", pattern = ".*png$", full.names = TRUE)
gifski(png_files, gif_file = "animation.gif", width = 800, height = 600, delay = 1)
knitr::include_graphics("/Users/prachi/Desktop/Internship/ETC5543/temp/animation.gif")
knitr::include_graphics("/Users/prachi/Desktop/Internship/ETC5543/temp/animation.gif")
knitr::include_graphics("/Users/prachi/Desktop/Internship/ETC5543/Animation/animation.gif")
knitr::include_graphics("/Users/prachi/Desktop/Internship/ETC5543/Animation/animation.gif")
animation + transition_time(Year)
library(gifski)
png_files <- list.files("/Users/prachi/Desktop/Internship/ETC5543/Animation", pattern = ".*png$", full.names = TRUE)
gifski(png_files, gif_file = "animation.gif", width = 800, height = 600, delay = 1)
knitr::include_graphics("/Users/prachi/Desktop/Internship/ETC5543/Animation/animation.gif")
knitr::include_graphics("/Users/prachi/Desktop/Internship/ETC5543/Animation/animation.gif")
content <-  paste0("Year: ", Year)
animation + transition_time(Year) +
labs(subtitle = aste0("Year: ", Year))
ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
scale_color_viridis_d() +
#scale_x_log10() +
#scale_size(range = c(2, 12)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation <- fulldata %>%
pivot_wider(names_from = c(Commute_Count, Commute_IR) ,
values_from = Value) %>%
pivot_longer(cols = c(local_count_na, imp_count_na),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_longer(cols = c(na_local_IR, na_imp_IR),
names_to = "IR_Type",
values_to = "IR") %>%
select(Year, Virus_Name, Transmission, IR, Count) %>%
group_by(Virus_Name, Year, Transmission) %>%
summarise(IR = sum(IR, na.rm = TRUE),
Count = sum(Count, na.rm = TRUE)) %>%
mutate(rank = rank(-IR),
Value_rel = IR/IR[rank==1],
Value_lbl = paste0(" ",round(IR/1e9))) %>%
as.data.frame()
knitr::include_graphics("/Users/prachi/Desktop/Internship/ETC5543/Animation/animation.gif")
animation <- fulldata %>%
pivot_wider(names_from = c(Commute_Count, Commute_IR) ,
values_from = Value) %>%
pivot_longer(cols = c(local_count_na, imp_count_na),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_longer(cols = c(na_local_IR, na_imp_IR),
names_to = "IR_Type",
values_to = "IR") %>%
select(Year, Virus_Name, Transmission, IR, Count) %>%
group_by(Year, Transmission, Virus_Name ) %>%
summarise(IR = sum(IR, na.rm = TRUE),
Count = sum(Count, na.rm = TRUE)) %>%
as.data.frame()
animation <- ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
geom_text(aes(y = 0, label = paste(Virus_Name, " ")), vjust = 0.2, hjust = 1) +
geom_text(aes(y = IR, label = IR, hjust=0)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()+
coord_flip()
animation + transition_time(Year)
png_files <- list.files("/Users/prachi/Desktop/Internship/ETC5543/Animation", pattern = ".*png$", full.names = TRUE)
gifski(png_files, gif_file = "animation.gif", width = 800, height = 600, delay = 1)
png_files <- list.files("/Users/prachi/Desktop/Internship/ETC5543/Animation", pattern = ".*png$", full.names = TRUE)
gifski(png_files, gif_file = "/Users/prachi/Desktop/Internship/ETC5543/Animation/animation.gif", width = 800, height = 600, delay = 1)
knitr::include_graphics("/Users/prachi/Desktop/Internship/ETC5543/Animation/animation.gif")
library(gganimate)
animation <- ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
geom_text(aes(y = 0, label = paste(Virus_Name, " ")), vjust = 0.2, hjust = 1) +
geom_text(aes(y = IR, label = IR, hjust=0)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation <- fulldata %>%
pivot_wider(names_from = c(Commute_Count, Commute_IR) ,
values_from = Value) %>%
pivot_longer(cols = c(local_count_na, imp_count_na),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_longer(cols = c(na_local_IR, na_imp_IR),
names_to = "IR_Type",
values_to = "IR") %>%
select(Year, Virus_Name, Transmission, IR, Count) %>%
group_by(Year, Transmission, Virus_Name ) %>%
summarise(IR = sum(IR, na.rm = TRUE),
Count = sum(Count, na.rm = TRUE)) %>%
as.data.frame()
ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
geom_text(aes(y = 0, label = paste(Virus_Name, " ")), vjust = 0.2, hjust = 1) +
geom_text(aes(y = IR, label = IR, hjust=0)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation <- ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
geom_text(aes(y = 0, label = paste(Virus_Name, " ")), vjust = 0.2, hjust = 1) +
geom_text(aes(y = IR, label = IR, hjust=0)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation + transition_time(Year)
library(magick)
library(magrittr)
library(gifski)
png_files <- list.files("/Users/prachi/Desktop/Internship/ETC5543/Animation",
pattern = ".*png$", full.names = TRUE)
gifski(png_files, gif_file = "/Users/prachi/Desktop/Internship/ETC5543/Animation/animation.gif",
width = 800, height = 600, delay = 1)
knitr::include_graphics("/Users/prachi/Desktop/Internship/ETC5543/Animation/animation.gif")
library(gganimate)
animation <- ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
#geom_text(aes(y = 0, label = paste(Virus_Name, " ")), vjust = 0.2, hjust = 1) +
geom_text(aes(y = IR, label = IR, hjust=0)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation <- ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
#geom_text(aes(y = 0, label = paste(Virus_Name, " ")), vjust = 0.2, hjust = 1) +
geom_text(aes(y = IR, label = IR, hjust=0)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
#geom_text(aes(y = 0, label = paste(Virus_Name, " ")), vjust = 0.2, hjust = 1) +
geom_text(aes(y = IR, label = IR, hjust=0)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
#geom_text(aes(y = 0, label = paste(Virus_Name, " ")), vjust = 0.2, hjust = 1) +
geom_text(aes(y = IR, label = IR, vjust = 0.2, hjust = 1)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
geom_text(aes(y = 0), vjust = 0.2, hjust = 1) +
geom_text(aes(y = IR, label = IR, hjust=0)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
geom_text(aes(y = 0, label = paste(" ")), vjust = 0.2, hjust = 1) +
geom_text(aes(y = IR, label = IR, hjust=0)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation <- fulldata %>%
pivot_wider(names_from = c(Commute_Count, Commute_IR) ,
values_from = Value) %>%
pivot_longer(cols = c(local_count_na, imp_count_na),
names_to = "Count_Type",
values_to = "Count")%>%
pivot_longer(cols = c(na_local_IR, na_imp_IR),
names_to = "IR_Type",
values_to = "IR") %>%
select(Year, Virus_Name, Transmission, IR, Count) %>%
group_by(Year, Transmission, Virus_Name ) %>%
summarise(IR = sum(IR, na.rm = TRUE),
Count = sum(Count, na.rm = TRUE)) %>%
as.data.frame()
ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
geom_text(aes(y = 0, label = paste(" ")), vjust = 0.2, hjust = 1) +
geom_text(aes(y = IR, label = IR, hjust=0)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation <- ggplot(animation, aes(x = Virus_Name,
y = IR,
fill = Virus_Name)) +
geom_bar(stat = 'identity', show.legend = FALSE, alpha = 0.9) +
geom_text(aes(y = 0, label = paste(" ")), vjust = 0.2, hjust = 1) +
geom_text(aes(y = IR, label = IR, hjust=0)) +
facet_wrap(~Transmission) +
labs(x = "Virus", y = "Incidence Rate",
title = "Yearly sum of virus incidence occured")+
theme_bw()
animation + transition_time(Year)
library(magick)
library(magrittr)
library(gifski)
png_files <- list.files("/Users/prachi/Desktop/Internship/ETC5543/Animation",
pattern = ".*png$", full.names = TRUE)
gifski(png_files, gif_file = "/Users/prachi/Desktop/Internship/ETC5543/Animation/animation.gif",
width = 800, height = 600, delay = 1)
knitr::include_graphics("/Users/prachi/Desktop/Internship/ETC5543/Animation/animation.gif")
