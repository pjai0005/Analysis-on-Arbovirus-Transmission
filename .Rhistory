knitr::opts_chunk$set(echo = TRUE,
message = FALSE,
warning = FALSE)
library(tidyverse)
library(ggplot2)
library(sf)
# library(geojsonio)
library(broom)
# yearly <- file.choose()
# yearly_data <- read_csv(yearly)
full <- file.choose()
full_data <- read_csv(full)
sa3_geo_data <- st_as_sf(st_read("data/SA3_2011/SA3_2011_AUST.shp")) %>%
select(SA3_NAME11)
joint_data <- as_tibble(merge(full_data, sa3_geo_data, by.x = "SA3_NAME_2011", by.y = "SA3_NAME11"))
joint_data <- st_as_sf(joint_data, sf_column_name = "geometry")
# class(sa3_geo_data)
plot(sa3_geo_data, col="#f2f2f2", bg="skyblue", lwd=0.25, border=0 )
ggplot() + geom_polygon(data = sa3_geo_data, aes(x = long, y = lat, group = group), colour = "black", fill = NA)
knitr::opts_chunk$set(echo = TRUE,
message = FALSE,
warning = FALSE)
library(tidyverse)
library(ggplot2)
library(sf)
# library(geojsonio)
library(broom)
library(readxl)
library(rgdal)
# yearly <- file.choose()
# yearly_data <- read_csv(yearly)
# full <- file.choose()
# full_data <- read_csv(full)
full_data <- read_csv(file.choose())
sa3_geo_data <- st_as_sf(st_read("data/SA3_2011/SA3_2011_AUST.shp")) %>%
select(SA3_NAME11)
joint_data <- as_tibble(merge(full_data, sa3_geo_data, by.x = "SA3_NAME_2011", by.y = "SA3_NAME11"))
joint_data <- st_as_sf(joint_data, sf_column_name = "geometry")
filename <- file.choose()
filename <- file.choose()
virus_list <-  c("Dengue",
"West_Nile_Kunjin",
"Zika",
"Chikungunya",
"Japanese_Encephalitis_Virus")
con_data <- data.frame()
for(i in 1:5)
{
con_data <- rbind(con_data, read_excel(filename, sheet = i) %>%
add_column(Virus = virus_list[i]))
}
plot(sa3_geo_data, col="#f2f2f2", bg="skyblue", lwd=0.25, border=0 )
ggplot() + geom_polygon(data = sa3_geo_data, aes(x = long, y = lat, group = group), colour = "black", fill = NA)
library(tidyverse)
library(ggplot2)
library(sf)
library(broom)
library(readxl)
library(rgdal)
knitr::opts_chunk$set(echo = TRUE,
message = FALSE,
warning = FALSE)
library(tidyverse)
library(ggplot2)
library(sf)
library(broom)
library(readxl)
full_data <- read_csv(file.choose())
sa3_geo_data <- st_as_sf(st_read("data/SA3_2011/SA3_2011_AUST.shp")) %>%
select(SA3_NAME11)
getwd()
paste0(getwd(), "/Data/SA3_2011/")
shapefile <- readOGR(dsn = paste0(getwd(), "/Data/SA3_2011/"))
shapefile_df <- fortify(shapefile)
ggplot() +
geom_path(data = shapefile_df,
aes(x = long, y = lat, group = group),
color = 'gray', fill = 'white', size = .2)
View(shapefile_df)
ggplot() +
geom_path(data = shapefile_df,
aes(x = long, y = lat, group = group),
color = 'black', fill = 'white', size = .2)
knitr::opts_chunk$set(echo = TRUE,
message = FALSE,
warning = FALSE)
library(tidyverse)
library(ggplot2)
library(sf)
library(broom)
library(readxl)
full_data <- read_csv(file.choose())
sa3_geo_data <- st_as_sf(st_read("data/SA3_2011/SA3_2011_AUST.shp")) %>%
select(SA3_NAME11)
shapefile <- readOGR(dsn = paste0(getwd(), "/Data/SA3_2011/"))
library(rgdal)
knitr::opts_chunk$set(echo = TRUE,
message = FALSE,
warning = FALSE)
library(tidyverse)
library(ggplot2)
library(sf)
library(broom)
library(readxl)
library(rgdal)
full_data <- read_csv(file.choose())
sa3_geo_data <- st_as_sf(st_read("data/SA3_2011/SA3_2011_AUST.shp")) %>%
select(SA3_NAME11)
shapefile <- readOGR(dsn = paste0(getwd(), "/Data/SA3_2011/"))
shapefile_df <- fortify(shapefile)
ggplot() +
geom_path(data = shapefile_df,
aes(x = long, y = lat, group = group),
color = 'black', fill = 'white', size = .2)
joint_data <- as_tibble(merge(full_data, sa3_geo_data, by.x = "SA3_NAME_2011", by.y = "SA3_NAME11"))
joint_data <- st_as_sf(joint_data, sf_column_name = "geometry")
filename <- file.choose()
virus_list <-  c("Dengue",
"West_Nile_Kunjin",
"Zika",
"Chikungunya",
"Japanese_Encephalitis_Virus")
con_data <- data.frame()
for(i in 1:5)
{
con_data <- rbind(con_data, read_excel(filename, sheet = i) %>%
add_column(Virus = virus_list[i]))
}
knitr::opts_chunk$set(echo = TRUE,
message = FALSE,
warning = FALSE)
library(tidyverse)
library(ggplot2)
library(sf)
library(broom)
library(readxl)
library(rgdal)
library(tigris)
full_data <- read_csv(file.choose())
shapefile <- readOGR(dsn = paste0(getwd(), "/Data/SA3_2011/"))
shapefile_df <- fortify(shapefile, region = "SA3_NAME11")
shapefile_df <- fortify(shapefile, region = "SA3_NAME11")
data_avg_2007 <- full_data %>%
group_by(SA3_NAME_2011, Year) %>%
summarise(mean_incidence_rate = mean(BFV_IRLA)) %>%
filter(Year == "2007")
shapefile_df <- shapefile_df %>%
left_join(. , data_avg_2007, by=c("id"="SA3_NAME_2011"))
View(shapefile_df)
ggplot() +
geom_path(data = shapefile_df,
aes(x = long, y = lat, group = group),
color = 'black', fill = 'white', size = .2)
ggplot() +
geom_polygon(data = shapefile_df,
aes(fill = mean_incidence_rate, x = long, y = lat, group = group)) +
theme_void() +
scale_fill_viridis(trans = "log", breaks=c(1,5,10,20,50,100)) +
coord_map()
library(viridis)
ggplot() +
geom_polygon(data = shapefile_df,
aes(fill = mean_incidence_rate, x = long, y = lat, group = group)) +
theme_void() +
scale_fill_viridis(trans = "log", breaks=c(1,5,10,20,50,100)) +
coord_map()
install.packages("piggyback")
knitr::opts_chunk$set(echo = TRUE,
message = FALSE,
warning = FALSE)
library(tidyverse)
library(ggplot2)
library(sf)
library(broom)
library(readxl)
library(rgdal)
library(tigris)
full_data <- read_csv(file.choose())
shapefile <- readOGR(dsn = paste0(getwd(), "/Data/SA3_2011/"))
shapefile_df <- fortify(shapefile, region = "SA3_NAME11")
data_avg_2007 <- full_data %>%
group_by(SA3_NAME_2011, Year) %>%
summarise(mean_incidence_rate = mean(BFV_IRLA)) %>%
filter(Year == "2007")
shapefile_df <- shapefile_df %>%
left_join(. , data_avg_2007, by=c("id"="SA3_NAME_2011"))
ggplot() +
geom_path(data = shapefile_df,
aes(x = long, y = lat, group = group),
color = 'black', fill = 'white', size = .2)
library(viridis)
ggplot() +
geom_polygon(data = shapefile_df,
aes(fill = mean_incidence_rate, x = long, y = lat, group = group)) +
theme_void() +
scale_fill_viridis(trans = "log", breaks=c(1,5,10,20,50,100)) +
coord_map()
filename <- file.choose()
virus_list <-  c("Dengue",
"West_Nile_Kunjin",
"Zika",
"Chikungunya",
"Japanese_Encephalitis_Virus")
con_data <- data.frame()
for(i in 1:5)
{
con_data <- rbind(con_data, read_excel(filename, sheet = i) %>%
add_column(Virus = virus_list[i]))
}
knitr::opts_chunk$set(echo = TRUE,
message = FALSE,
warning = FALSE)
library(tidyverse)
library(ggplot2)
library(sf)
library(broom)
library(readxl)
library(rgdal)
library(tigris)
library(leaflet)
full_data <- read_csv(file.choose())
shapefile <- readOGR(dsn = paste0(getwd(), "/Data/SA3_2011/"))
shapefile_df <- fortify(shapefile, region = "SA3_NAME11")
data_avg_2007 <- full_data %>%
group_by(SA3_NAME_2011, Year) %>%
summarise(mean_incidence_rate = mean(BFV_IRLA)) %>%
filter(Year == "2007")
shapefile_df <- shapefile_df %>%
left_join(. , data_avg_2007, by=c("id"="SA3_NAME_2011"))
# ggplot() +
# geom_path(data = shapefile_df,
#           aes(x = long, y = lat, group = group),
#           color = 'black', fill = 'white', size = .2)
# library(viridis)
# ggplot() +
#   geom_polygon(data = shapefile_df,
#                aes(fill = mean_incidence_rate, x = long, y = lat, group = group)) +
#   theme_void() +
#   scale_fill_viridis(trans = "log", breaks=c(1,5,10,20,50,100)) +
#   coord_map()
# m <- leaflet(shapefile)
leaflet(shapefile) %>%
addPolygons(color = "#444444", weight = 1, smoothFactor = 0.5,
opacity = 1.0, fillOpacity = 0.5,
fillColor = ~colorQuantile("YlOrRd", ALAND)(ALAND),
highlightOptions = highlightOptions(color = "white", weight = 2,
bringToFront = TRUE))
# m <- leaflet(shapefile)
leaflet(shapefile) %>%
addPolygons(color = "#444444", weight = 1, smoothFactor = 0.5,
opacity = 1.0, fillOpacity = 0.5,
fillColor = "red",
highlightOptions = highlightOptions(color = "white", weight = 2,
bringToFront = TRUE))
View(shapefile_df)
View(shapefile)
shapefile_temp <- shapefile
View(data_avg_2007)
View(shapefile_temp)
?geo_join
View(data_avg_2007)
shapefile_temp <- geo_join(shapefile, data_avg_2007, "SA3_NAME11", "SA3_NAME_2011")
View(shapefile_temp)
leaflet(shapefile_temp) %>%
addPolygons(color = "#444444", weight = 1, smoothFactor = 0.5,
opacity = 1.0, fillOpacity = 0.5,
fillColor = ~colorQuantile("YlOrRd", mean_incidence_rate)(mean_incidence_rate),
highlightOptions = highlightOptions(color = "white", weight = 2,
bringToFront = TRUE))
leaflet(shapefile_temp) %>%
addPolygons(color = "#444444", weight = 1, smoothFactor = 0.5,
opacity = 1.0, fillOpacity = 0.5,
fillColor = ~colorNumeric("YlOrRd", mean_incidence_rate)(mean_incidence_rate),
highlightOptions = highlightOptions(color = "white", weight = 2,
bringToFront = TRUE))
leaflet(shapefile_temp) %>%
addPolygons(color = "#444444", weight = 1, smoothFactor = 0.5,
opacity = 1.0, fillOpacity = 0.5,
fillColor = ~colorNumeric("Blues", mean_incidence_rate)(mean_incidence_rate),
highlightOptions = highlightOptions(color = "white", weight = 2,
bringToFront = TRUE))
leaflet(shapefile_temp) %>%
addPolygons(color = "#444444", weight = 1, smoothFactor = 0.5,
fillColor = ~colorNumeric("Blues", mean_incidence_rate)(mean_incidence_rate),
highlightOptions = highlightOptions(color = "white", weight = 2,
bringToFront = TRUE))
leaflet(shapefile_temp) %>%
addPolygons(color = "#444444", weight = 1, smoothFactor = 0.5,
fillColor = ~colorNumeric("RdYlBu", mean_incidence_rate)(mean_incidence_rate),
highlightOptions = highlightOptions(color = "white", weight = 2,
bringToFront = TRUE))
leaflet(shapefile_temp) %>%
addPolygons(color = "#444444", weight = 1, smoothFactor = 0.5,
fillColor = ~colorNumeric("Reds", mean_incidence_rate)(mean_incidence_rate),
highlightOptions = highlightOptions(color = "white", weight = 2,
bringToFront = TRUE))
leaflet(shapefile_temp) %>%
addPolygons(weight = 1, smoothFactor = 0.5,
fillColor = ~colorNumeric("Reds", mean_incidence_rate)(mean_incidence_rate),
highlightOptions = highlightOptions(color = "white", weight = 2,
bringToFront = TRUE))
leaflet(shapefile_temp) %>%
addPolygons(color = "#444444", weight = 0.5, smoothFactor = 1,
fillColor = ~colorNumeric("Reds", mean_incidence_rate)(mean_incidence_rate),
highlightOptions = highlightOptions(color = "white", weight = 2,
bringToFront = TRUE))
leaflet(shapefile_temp) %>%
addPolygons(color = "#444444", weight = 0.5, smoothFactor = 0,
fillColor = ~colorNumeric("Reds", mean_incidence_rate)(mean_incidence_rate),
highlightOptions = highlightOptions(color = "white", weight = 2,
bringToFront = TRUE))
shiny::runApp('ArbovirusesTransmission')
leaflet(shapefile_temp) %>%
addPolygons(color = "#444444", weight = 1, smoothFactor = 0.5,
fillColor = ~colorNumeric("RdYlBu", mean_incidence_rate)(mean_incidence_rate),
highlightOptions = highlightOptions(color = "white", weight = 2,
bringToFront = TRUE))
leaflet(shapefile_temp) %>%
addPolygons(color = "#444444", weight = 1, smoothFactor = 0.5,
fillColor = ~colorNumeric("RdYlBu", mean_incidence_rate)(mean_incidence_rate),
highlightOptions = highlightOptions(color = "white", weight = 2,
bringToFront = TRUE))
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
shiny::runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
shiny::runApp('ArbovirusesTransmission')
shiny::runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
shiny::runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
shiny::runApp('ArbovirusesTransmission')
shiny::runApp('ArbovirusesTransmission')
knitr::opts_chunk$set(echo = TRUE,
message = FALSE,
warning = FALSE)
full_data <- read_csv(file.choose())
View(full_data)
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
shapefile <- readOGR(dsn = paste0(getwd(), "/../Data/SA3_2011/"))
library(shiny)
library(leaflet)
library(rgdal)
library(tidyverse)
library(tigris)
library(leaflet.extras)
library(shinydashboard)
shapefile <- readOGR(dsn = paste0(getwd(), "/../Data/SA3_2011/"))
getwd()
shapefile <- readOGR(dsn = paste0(getwd(), "/Data/SA3_2011/"))
View(shapefile)
sp_cent <- gCentroid(as(shapefile, "Spatial"), byid = TRUE)
library(sf)
sp_cent <- gCentroid(as(shapefile, "Spatial"), byid = TRUE)
library(rgeos)
sp_cent <- gCentroid(as(shapefile, "Spatial"), byid = TRUE)
library(sf)
sp_cent <- st_centroid(shapefile)
View(shapefile)
get.centroid.bb <- function(x){
N <- length(x)  # Number of polygons
# Initialise data.frame
Centroids.bb <- data.frame(matrix(NA, N, 2, dimnames = list(NULL, c("long", "lat"))))
for(i in 1:N){
# Bounding box of polygon
bb <- bbox(x@polygons[[i]])
# Compute centroid
Centroids.bb[i,] <- c(
0.5 * (bb[1,1] + bb[1,2]),
0.5 * (bb[2,1] + bb[2,2]))
}
return(Centroids.bb)
}
get.centroid.bb(shapefile)
View(shapefile)
View(shapefile)
get.centroid.bb(shapefile) %>% cbind(shapefile$SA3_NAME11)
runApp('ArbovirusesTransmission')
centroid <- get.centroid.bb(shapefile) %>% cbind(shapefile$SA3_NAME11)
centroid <- get.centroid.bb(shapefile) %>% cbind(shapefile$SA3_NAME11)
data <- full_data %>% group_by(SA3_NAME_2011) %>%
summarise(avg_donation_rate = mean(donationrate1000))
?inner_join
View(centroid)
centroid <- get.centroid.bb(shapefile) %>% cbind(shapefile$SA3_NAME11)
colnames(centroid) <- c("long", "lat", "SA3_NAME_2011")
data <- full_data %>% group_by(SA3_NAME_2011) %>%
summarise(avg_donation_rate = mean(donationrate1000))
jojned_data <- inner_join(centroid, data)
View(jojned_data)
runApp('ArbovirusesTransmission')
?full_join
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
unique(full_data$Year)
runApp('ArbovirusesTransmission')
shiny::runApp('ArbovirusesTransmission')
shiny::runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
runApp('ArbovirusesTransmission')
